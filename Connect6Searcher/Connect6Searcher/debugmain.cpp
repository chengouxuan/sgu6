#include "movesearcher.h"
#include "DTSSer.h"
#include "ComplexBoard.h"

int main() {
    //char *data[] = {
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . X . . . . . . . . . . . .",
    //    "02 . . . X . . . O X X . . . . . . . . .",
    //    "03 . . . . O . O O O . . . . . . . . . .",
    //    "04 . . . . X O . O O O X . O . . . . . .",
    //    "05 . . . . . O . . . X O X X . . . . . .",
    //    "06 . . . . . X O O O X X X O . . . . . .",
    //    "07 . . . . O X X X O X O O . . . . . . .",
    //    "08 . . . O . X O O X X X X O . . . . . .",
    //    "09 . . O X X X X O X X O . X . . . . . .",
    //    "10 . . . X X O X X . O X O . . . . . . .",
    //    "11 . . O . . O X O X . O O . . . . . . .",
    //    "12 . . . . . O X . . O . . . . . . . . .",
    //    "13 . . . . O X O . O . . . . . . . . . .",
    //    "14 . . . . . . . X . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . O . . . . . . . . .",
    //    "03 . . . . . . . . X . . . . . . . . . .",
    //    "04 . . . . . . O X O . . . . . . . . . .",
    //    "05 . . . O . O X X O . . . . . . . . . .",
    //    "06 . . . . X X X O X . . . . . . . . . .",
    //    "07 . . . . O X . O . . . . . . . . . . .",
    //    "08 . . . . O X X . X O O . . . . . . . .",
    //    "09 . . . O X X O X X X . O O . . . . . .",
    //    "10 . . O X X O O . O O X X X X O . . . .",
    //    "11 . . X O O . . . . . . O . . . . . . .",
    //    "12 . O X . O . . . . . . . . . . . . . .",
    //    "13 . . X O X . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //    //  A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . O X X X X O . .",
    //    "03 . . . . . . . . . . . . O O O . . . .",
    //    "04 . . . . . . . . . . . . O X . . O . .",
    //    "05 . . . . . . . . X O O O O X O . X O .",
    //    "06 . . . . O . . O . . X X O X X O X . .",
    //    "07 . . . O . X . . . X O X X O . X X . .",
    //    "08 . . . . . . X . O O X X X O X . X . .",
    //    "09 . . . . . O . X . X X O . X . . . O .",
    //    "10 . . . . . . . . X O . . O . O . O . .",
    //    "11 . . . . . . . O . . . . . . . . . . .",
    //    "12 . . . . . . . . . . O . . . . . . . .",
    //    "13 . . . . . . . . . . . X . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //    //  A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . . . . . . . . . .",
    //    "07 . . . . . . . . . O X . . . . . . . .",
    //    "08 . . . . . . . . . X O . . . . . . . .",
    //    "09 . . . . . . . . O X O . . . . . . . .",
    //    "10 . . . . . . . . . X . O . . . . . . .",
    //    "11 . . . . . . . . . O . . . . . . . . .",
    //    "12 . . . . . . . . . X . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //     // A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . . . O . . . . . .",
    //    "07 . . . . . . . . . . . X . . . . . . .",
    //    "08 . . . . . . . . . O X . . O . . . . .",
    //    "09 . . . . . . . . . X X . O . . . . . .",
    //    "10 . . . . . . . . O . X O . . . . . . .",
    //    "11 . . . . . . O X . . O . . . . . . . .",
    //    "12 . . . . . . X . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //    //  A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . O . . . . . . . . .",
    //    "02 . . . . . X . O X . . . . . . . . . .",
    //    "03 . . . . O O . X O . . . . . . . . . .",
    //    "04 . . . O X X X X O . . . . . . . . . .",
    //    "05 . . O . O X X . O . . . . . O . . . .",
    //    "06 . . . . O X O X . . . . X O . . . . .",
    //    "07 . . O X X X X O X O O O X O X . . . .",
    //    "08 . . . O . . X O O O X X . . . O . . .",
    //    "09 . . . . O O X X X X O . O . X . . . .",
    //    "10 . . . . . X . O X O . X X X X O . . .",
    //    "11 . . . . . . . X . O . O X O O X . . .",
    //    "12 . . . . . . O . . O X X O X X . O . .",
    //    "13 . . . . . . . . . X O X X . X O . . .",
    //    "14 . . . . . . . . . O . X O . X O . . .",
    //    "15 . . . . . . . . . . X O O . X . . . .",
    //    "16 . . . . . . . . . O . X . . O O . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //    //  A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . O . . . . . . . . .",
    //    "06 . . . . . . . . . X . . . . . . . . .",
    //    "07 . . . . . . . . O X O . . . . . . . .",
    //    "08 . . . . . . . O O X O . . . . . . . .",
    //    "09 . . . . . . O X X X X O . . . . . . .",
    //    "10 . . . . . . . X X O X . . . . . . . .",
    //    "11 . . . . . . O X O O . . . . . . . . .",
    //    "12 . . . . . . O X X . . . . . . . . . .",
    //    "13 . . . . . . . O . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    ////      A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . O . . . . . . . . .",
    //    "07 . . . . . . . . O X . . . . . . . . .",
    //    "08 . . . . . . . O X . X . . . . . . . .",
    //    "09 . . . . . . O . O X . . . . . . . . .",
    //    "10 . . . . . . . . . X O . . . . . . . .",
    //    "11 . . . . . . . . . . . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //      A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . . . . . . . . . .",
    //    "07 . . . . . . . X O . . . . . . . . . .",
    //    "08 . . . . . . . . X O . . . . . . . . .",
    //    "09 . . . . . . . O . X . . . . . . . . .",
    //    "10 . . . . . . . . . . O . . . . . . . .",
    //    "11 . . . . . . . . . . . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //     // A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . . . . . . . . . .",
    //    "07 . . . . . . . . O . . . . . . . . . .",
    //    "08 . . . . . . . O O . . . . . . . . . .",
    //    "09 . . . . . . X X O X . . . . . . . . .",
    //    "10 . . . . . . . . . . . . . . . . . . .",
    //    "11 . . . . . . . . . . . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //// A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . . . . . . . . . .",
    //    "07 . . . . . . . . . X . . . . . . . . .",
    //    "08 . . . . . . . . O . X . . . . . . . .",
    //    "09 . . . . . . . O . X . . . . . . . . .",
    //    "10 . . . . . . . O O . . . . . . . . . .",
    //    "11 . . . . . . . . . . . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //     // A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . O . O . . . . . . . . .",
    //    "06 . . . . . . . . X . . . . . . . . . .",
    //    "07 . . . . . . . X . X . O . . . . . . .",
    //    "08 . . . . . . X . O . X . . . . . . . .",
    //    "09 . . . . . . . O . X . X . . . . . . .",
    //    "10 . . . . . . . . O . . . O . . . . . .",
    //    "11 . . . . . . . . . O . . . . . . . . .",
    //    "12 . . . . . . . . . . O . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    //    // A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . . . . . . . . . .",
    //    "07 . . . . . . . . . . . . . . . . . . .",
    //    "08 . . . . . . . . . . . . . . . . . . .",
    //    "09 . . . . . . . . . X O . . . . . . . .",
    //    "10 . . . . . . . . . . . O. . . . . . . .",
    //    "11 . . . . . . . . . . . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . ."
    //};
    //char *data[] = {
    ////      A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . . X . . . . . . . .",
    //    "07 . . . . . . . . X O O O O X . . . . .",
    //    "08 . . . . . . . . O X X X . O . O . . .",
    //    "09 . . . . . . . . O X . . . . . . . . .",
    //    "10 . . . . . . . . X . . . . . . . . . .",
    //    "11 . . . . . X . O . O . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . .",
    //};
    //char *data[] = {
    //    //      A B C D E F G H I J K L M N O P Q R S
    //    "00 . . . . . . . . . . . . . . . . . . .",
    //    "01 . . . . . . . . . . . . . . . . . . .",
    //    "02 . . . . . . . . . . . . . . . . . . .",
    //    "03 . . . . . . . . . . . . . . . . . . .",
    //    "04 . . . . . . . . . . . . . . . . . . .",
    //    "05 . . . . . . . . . . . . . . . . . . .",
    //    "06 . . . . . . . . . X . . . . . . . . .",
    //    "07 . . . . . . . . X X . . . . . . . . .",
    //    "08 . . . . . . . . O X . . . . . . . . .",
    //    "09 . . . . . . . O . X . . . . . . . . .",
    //    "10 . . . . . . . . O . . . . . . . . . .",
    //    "11 . . . . . . . . . O . . . . . . . . .",
    //    "12 . . . . . . . . . . . . . . . . . . .",
    //    "13 . . . . . . . . . . . . . . . . . . .",
    //    "14 . . . . . . . . . . . . . . . . . . .",
    //    "15 . . . . . . . . . . . . . . . . . . .",
    //    "16 . . . . . . . . . . . . . . . . . . .",
    //    "17 . . . . . . . . . . . . . . . . . . .",
    //    "18 . . . . . . . . . . . . . . . . . . .",
    //};
    char *data[] = {
        //  A B C D E F G H I J K L M N O P Q R S
        "00 . . . . . . . . . . . . . . . . . . .",
        "01 . . . . . . . . . . . . . . . . . . .",
        "02 . . . . . . . . . . . . . . . . . . .",
        "03 . . . . . . . . . . . . . . . . . . .",
        "04 . . . . . . . . . . . . . . . . . . .",
        "05 . . . . . . . . . O . . . . . . . . .",
        "06 . . . . . . . . O X . . . . . . . . .",
        "07 . . . . . X . O X X . . . . . . . . .",
        "08 . . . . . . O . O X . . . . . . . . .",
        "09 . . . . . . . O . X . . . . . . . . .",
        "10 . . . . . . . . O . . . . . . . . . .",
        "11 . . . . . . . . . O . . . . . . . . .",
        "12 . . . . . . . . . . . . . . . . . . .",
        "13 . . . . . . . . . . . X . . . . . . .",
        "14 . . . . . . . . . . . . . . . . . . .",
        "15 . . . . . . . . . . . . . . . . . . .",
        "16 . . . . . . . . . . . . . . . . . . .",
        "17 . . . . . . . . . . . . . . . . . . .",
        "18 . . . . . . . . . . . . . . . . . . ."
    };

    Board board;
    char s[10];
    int d = 0;
    FOR_EACH_CELL(r, c) {
        int n;
        sscanf(data[r] + d, c == 0 ? (d = 0, "%*s%s%n") : "%s%n", s, &n);
        d += n;
        switch(*s) {
            case 'X': board[r][c] = CELL_TYPE_BLACK; break;
            case 'O': board[r][c] = CELL_TYPE_WHITE; break;
            case '.': board[r][c] = CELL_TYPE_EMPTY; break;
        }
    }

    //complexBoard.NewSearchInit(board);
    //evaluator.Evaluate(true);
    //return 0;

    //complexBoard.NewSearchInit(board);
    //if(dtsser.Search(true, DTSSer::_DEPTH_LIMIT_MAX, NullOperate())) {
    //    printf("DTSS Success\n");
    //} else {
    //    printf("DTSS Fail\n");
    //}
    //return 0;

    dtsser._nodes = 0;
    clock_t t = clock();
    //searcher.Initialize();
    searcher.SearchGoodMoves(board, true, 2);
    complexBoard.PrintData();
    //searcher._dMove.Print();
    printf("\n%d dtss nodes\n", dtsser._nodes);
    d = (int)(clock() - t);
    printf("%d.%03d seconds\n", d / 1000, d % 1000);
    return 0;
}